<!DOCTYPE html>
<html>
	<head>
		<title>Sold Details</title>
		<link rel = "stylesheet" type = "text/css" href = "stylesheets/style.css" />
	</head>
	<body>
		<header>
			<ul>
				<li><a href="index.html">Home</a></li>
				<li><a href="buy.html">Buy tickets</a></li>
				<li class="currentTab"><a href="sold.html">Sold ticket details</a></li>
				<li><a href="add.html">Add show</a></li>
				<li><a href="remove.html">Remove show</a></li>
			</ul>
		</header>
		<div class="content">
			<table>
				<thead>
	                <tr>
						<th>Show Name</th>
						<th>Tickets Sold</th>
	                    <th>Total Seats</th>
					</tr>
				</thead>
                <tbody>
                	
                </tbody>
			</table>
		</div>
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
		<script>
			$(function(){
              $.ajax({
                url : "http://localhost:8080/_ah/api/theatreManagement/v1/show/list",
                method : 'get',
                headers : 'application/json',
                success : function(data){
                  if(!(data.items)){
                  	$('tbody').append("<tr><td colspan='3'>No shows available</td></tr>");
                  }else{
	                for (var i=0; i < data.items.length; i++){
	             	  var sold = data.items[i].capacity - data.items[i].available
	                  $('tbody').append("<tr><td>" + data.items[i].name + "</td><td>" + sold + "</td><td>" + data.items[i].available + "</td></tr>");
	                }
	              }
                },
                error : function(data){
                  console.log(data);
                  console.log('error');
                }
              });
			});
		</script>
	</body>
</html>